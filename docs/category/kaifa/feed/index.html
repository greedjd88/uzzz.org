<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>开发 &#8211; 有组织在!</title>
	<atom:link href="https://uzzz.org/category/kaifa/feed" rel="self" type="application/rss+xml" />
	<link>https://uzzz.org/</link>
	<description></description>
	<lastBuildDate>Thu, 13 Sep 2018 07:48:08 +0000</lastBuildDate>
	<language>zh-CN</language>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	<generator>https://wordpress.org/?v=5.2.4</generator>

<image>
	<url>https://uzzz.org/wp-content/uploads/2019/10/cropped-icon-32x32.png</url>
	<title>开发 &#8211; 有组织在!</title>
	<link>https://uzzz.org/</link>
	<width>32</width>
	<height>32</height>
</image> 
	<item>
		<title>使用最新WebStorm开发及调试React Native项目</title>
		<link>https://uzzz.org/article/1424.html</link>
				<pubDate>Thu, 13 Sep 2018 07:48:08 +0000</pubDate>
		<dc:creator><![CDATA[fandyvon]]></dc:creator>
				<category><![CDATA[开发]]></category>

		<guid isPermaLink="false">http://wp.uzzz.org/article/1424.html</guid>
				<description><![CDATA[React Native允许您使用JavaScript和React为iOS和Android开发原生移动应用程序。它是由Facebook创建的，用于Instagram，Airbnb和现在的JetBrains自己的 YouTrack移动应用程序（顺便说一下，它是开源的）等知名应用程序。 使用WebStorm，您现在可以使用React Native开发移动应用程序]]></description>
								<content:encoded><![CDATA[<div id="article_content" class="article_content clearfix">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-3019150162.css">
<div id="content_views" class="markdown_views prism-atom-one-dark">
  <!-- flowchart 箭头图标 勿删 --><br />
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
   <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
  </svg> </p>
<div class="entry-content">
<p><strong><a href="https://facebook.github.io/react-native/" rel="nofollow" data-token="054ae082bc4a9e950ed47ce19a92b736"><font><font class="">React Native</font></font></a></strong><font><font class="">允许您使用JavaScript和React为iOS和Android开发原生移动应用程序。</font><font class="">它是由Facebook创建的，用于Instagram，Airbnb和现在的JetBrains自己的</font></font><a href="https://blog.jetbrains.com/youtrack/2016/11/introducing-youtrack-mobile/" rel="nofollow" data-token="84dae370df6ca19f5ec001477fb884c7"><font><font class=""> YouTrack移动应用程序</font></font></a><font><font class="">（</font><font class="">顺便说一下，</font><font class="">它是</font></font><a href="https://github.com/JetBrains/youtrack-mobile" rel="nofollow" data-token="a91b3c88cfe20aac9f4223c268f2ca3b"><font><font class="">开源</font></font></a><font><font class="">的）</font><font class="">等知名应用程序</font><font class="">。</font></font></p>
<p><font><font>使用WebStorm，您现在可以使用React Native开发移动应用程序，从而获得WebStorm好处的所有好处，例如React，Flow支持和内置调试器的代码完成。</font><font>我们相信WebStorm可以成为使用React Native进行开发的强大工具！</font></font></p>
<p><font><font>让我们看看如何使用WebStorm中的React Native建立开发工作流程。</font></font></p>
<h2 id="install-react-native"><font><font class="">安装React Native CLI</font></font></h2>
<p><font><font>确保您的计算机上安装了React Native CLI。</font><font>要安装它，请在终端中运行以下命令：</font></font><code>npm install -g react-native-cli</code><font><font>。</font></font></p>
<p><font><font>您开始使用React Native时需要安装的工具列表取决于您的操作系统以及您要定位应用程序的移动平台。</font><font>有关详细的安装说明，</font><font>请查看</font></font><a href="https://facebook.github.io/react-native/docs/getting-started.html" rel="nofollow" data-token="e8378c9b76f7d6637a339d7002e220da"><font><font>React Native的入门指南</font></font></a><font><font>。</font></font></p>
<h2 id="create-new-react-native-project"><font><font>创建一个新项目</font></font></h2>
<p><font><font class="">现在，您可以直接从IDE欢迎屏幕创建一个新的React Native项目：单击</font></font><em><font><font class="">Create new project</font></font></em><font><font class="">，从左侧列表中选择React Native，输入项目名称并单击OK。</font></font></p>
<p><img class="alignnone size-full wp-image-8686" src="https://d3nmt5vlzunoa1.cloudfront.net/webstorm/files/2016/12/new-react-native-project.png" alt="新反应的原生项目" width="700"><br /> <span id="more-8684"></span></p>
<p><font><font>WebStorm将运行项目生成器并安装所有必需的依赖项。</font></font></p>
<p><font><font class="">当然，您也可以打开现有项目或从版本控制中选择一个。</font></font></p>
<p><font><font class="">我们建议您</font><font class="">从项目中</font><font class="">排除</font></font><em><font><font class="">android</font></font></em><font><font class="">和</font></font><em><font><font class="">ios</font></font></em><font><font class="">文件夹。</font><font>为此，右键单击“项目”视图中的文件夹，然后选择“ </font></font><em><font><font>标记为已排除”</font></font></em><font><font>。</font></font></p>
<p><img class="alignnone size-full wp-image-8687" src="https://d3nmt5vlzunoa1.cloudfront.net/webstorm/files/2016/12/mark-as-excluded.png" alt="标记为排除" width="700"></p>
<h2 id="running-react-native-app"><font><font>运行和调试应用程序</font></font></h2>
<p><font><font>现在我们在IDE中有我们的应用程序代码，让我们运行它。</font></font></p>
<p><strong><font><font class="">UPD：</font></font></strong><font><font class=""> &nbsp;在WebStorm 2018.1中，我们&nbsp; </font></font><a href="https://blog.jetbrains.com/webstorm/2018/02/webstorm-2018-1-eap-181-3263/" rel="nofollow" data-token="1cd29fe0dbd5c9943f18fc7a5521708e"><font><font class="">重新设计了React Native配置</font></font></a><font><font class="">。</font><font>它现在为您提供了更灵活的运行捆绑程序和构建应用程序本身。</font><font>在下面的步骤中，我们使用WebStorm版本2018.2。</font></font></p>
<p><font><font class="">我们需要创建一个新的</font></font><em><font><font class="">React Native运行/调试配置</font></font></em><font><font class="">。</font><font>在“Run”菜单中，选择“ </font></font><em><font><font>Edit configurations…”</font></font></em><font><font>，单击“ </font></font><em><font><font>+”</font></font></em><font><font>按钮</font><font>，然后</font><font>从列表中</font><font>选择“ </font></font><em><font><font>React Native</font></font></em><font><font> ”。</font></font></p>
<p><img class="alignnone size-full wp-image-9841" src="https://d3nmt5vlzunoa1.cloudfront.net/webstorm/files/2016/12/add-a-configuration.png" alt="附加一个构" width="700" height="250"></p>
<p><font><font>要首次启动React Native应用程序，您需要做两件事：运行React Native bundler / packager，然后使用</font></font><code>react-native run-ios</code><font><font>或</font><font>在模拟器或设备上构建和启动应用程序</font></font><code>run-android command</code><font><font>。</font><font>只有在那之后，您才可以开始调试它。</font></font></p>
<p><font><font>选中&nbsp; </font></font><em><font><font>Build and Launch Application</font></font></em><font><font>选项后，WebStorm将为您完成所有这些操作 &#8211; 您只需选择目标平台iOS或Android，确保React Native CLI软件包的路径正确并单击Ok。</font></font></p>
<p><img src="https://d3nmt5vlzunoa1.cloudfront.net/webstorm/files/2016/12/react-run-config.png" alt="反应 - 运行 - 配置" width="700" class="alignnone size-full wp-image-9849"></p>
<p><font><font class="">如果您要在Android上运行您的应用，请不要忘记先启动</font></font><a href="https://facebook.github.io/react-native/docs/getting-started.html#starting-the-android-virtual-device" rel="nofollow" data-token="f4e69deec63a9c0ed3995fd2e50ec574"><font><font class="">Android虚拟设备</font></font></a><font><font class=""> &nbsp;。</font><font>您还可以在</font></font><a href="https://facebook.github.io/react-native/docs/running-on-device.html#running-your-app-on-android-devices" rel="nofollow" data-token="81055659536f872b7af0159192702c59"><font><font>通过USB连接</font></font></a><font><font>的真实</font><a href="https://facebook.github.io/react-native/docs/running-on-device.html#running-your-app-on-android-devices" rel="nofollow" data-token="81055659536f872b7af0159192702c59"><font>Android设备</font></a><font>上运行您的应用程序</font><font>&nbsp;（为此，请不要忘记&nbsp; </font></font><a href="https://developer.android.com/training/basics/firstapp/running-app.html" rel="nofollow noopener noreferrer" target="_blank" data-token="e12329c536cd7372d5a7721764da49a2"><font><font>启用USB调试）</font></font></a><font><font>。</font></font></p>
<p><font><font>现在让我们运行创建的配置 &#8211; 单击IDE工具栏中配置名称旁边的绿色调试图标。</font><font>WebStorm将</font><font>首先在新的React Native工具窗口中</font><font>启动</font></font><a href="https://github.com/facebook/react-native/tree/master/packager" rel="nofollow" data-token="8bc28eb24db10a7e2161788787a6b22a"><font><font>React Native打包程序</font></font></a><font><font>，然后运行</font></font><code>react-native run-ios</code><font><font>或</font></font><code>react-native run-android</code><font><font>命令，具体取决于所选的目标平台。</font></font></p>
<p><font><font>如果构建成功，您将在模拟器中看到您的应用。</font></font></p>
<p><img class="alignnone size-full wp-image-8689" src="https://d3nmt5vlzunoa1.cloudfront.net/webstorm/files/2016/12/run-packager.png" alt="运行打包" width="600"></p>
<p><font><font>模拟器第一次打开后，转到</font></font><a href="https://facebook.github.io/react-native/docs/debugging.html#accessing-the-in-app-developer-menu" rel="nofollow" data-token="755683e4fb449ed6708f297525177b41"><font><font>应用内开发人员菜单</font></font></a><font><font>并选择</font></font><em><font><font>Remote JS Debugging</font></font></em><font><font>。</font></font></p>
<p><img class="alignnone size-full wp-image-8690" src="https://d3nmt5vlzunoa1.cloudfront.net/webstorm/files/2016/12/emulator.png" alt="模拟器" width="280"></p>
<p><font><font>然后，WebStorm的内置调试器将连接到模拟器，您将能够获得放在源代码中的断点。</font></font></p>
<p><img class="alignnone size-full wp-image-8691" src="https://d3nmt5vlzunoa1.cloudfront.net/webstorm/files/2016/12/debugging-the-app.png" alt="调试最应用" width="700"></p>
<p><font><font>在调试器中，您可以单步执行代码，设置监视，并浏览调用堆栈和变量值。</font></font></p>
<p><font><font>如果这不是你第一次运行你的应用程序并且自上次构建以来你没有对本机代码进行任何更改，那么你真的不需要重建应用程序 &#8211; 你可以只运行bundler，在模拟器中打开应用程序然后调试它。</font></font></p>
<p><font><font>在这种情况下，创建一个新配置（或修改您已创建的配置）并取消选中其中的&nbsp; </font></font><em><font><font>Build and Launch Application</font></font></em><font><font>复选框。</font><font>调试此配置时，WebStorm将运行React Native bundler并等待您在应用程序中</font><font>启用</font></font><em><font><font>远程调试的情况下</font></font></em><font><font>在模拟器中打开应用</font><font>程序。</font></font></p>
<p><img class="alignnone" src="https://d3nmt5vlzunoa1.cloudfront.net/webstorm/files/2018/02/debug-react-native-app.png" alt="" width="700"></p>
<p><font><font>现在，运行React Native捆绑器的灵活性也更高。</font><font>它现在在React Native配置中列为Before Launch任务。</font><font>默认情况下，它将运行&nbsp; </font></font><code>react-native start</code><font><font>。</font><font>您还可以从项目的package.json中选择将启动bundler的npm任务。</font></font></p>
<p><img class="alignnone" src="https://d3nmt5vlzunoa1.cloudfront.net/webstorm/files/2018/02/configure-react-native-bundler.png" alt="" width="700"></p>
<p><font><font>或者，如果您已经运行了捆绑包，则只需从配置中删除此步骤（因为您不需要为每个应用程序运行多个捆绑器）。</font></font></p>
<p><font><font>如果您在应用中使用Expo，请参阅此</font></font><a href="https://blog.jetbrains.com/webstorm/2018/02/webstorm-2018-1-eap-181-3263/#debugging-expo" rel="nofollow" data-token="a30cccc3ef253ee3284dfe65308edb56"><font><font>博客文章</font></font></a><font><font>了解相关步骤。</font></font></p>
<h2 id="react-native-coding-assistance"><font><font>编码协助</font></font></h2>
<p><font><font>您可能知道，WebStorm支持React和JSX，在构建React Native应用程序时肯定会有所帮助。</font><font>这包括：React组件的属性，事件和所需属性的代码完成; </font><font>导航到自定义组件的定义和完成; </font><font>组件名称的重构; </font><font>还有更多。</font><font>查看我们的博客文章，</font></font><a href="https://blog.jetbrains.com/webstorm/2015/10/working-with-reactjs-in-webstorm-coding-assistance/" rel="nofollow" data-token="bb85721ee224adc0ff4d380c105eeda8"><font><font>在WebStorm中使用React：编码帮助</font></font></a><font><font>。</font></font></p>
<p><font><font>WebStorm 2016.3还为React Native StyleSheet属性添加了代码完成：</font></font></p>
<p><img class="alignnone size-full wp-image-8692" src="https://d3nmt5vlzunoa1.cloudfront.net/webstorm/files/2016/12/stylesheet-properties.png" alt="样式表的属性" width="700"></p>
<p><font><font>如果您在项目中使用Flow，WebStorm可以在编辑器中突出显示Flow中的错误。</font><font>在</font></font><em><font><font>Preferences |</font></font></em><font><font>中将Flow作为JavaScript版本启用 </font><em><font>语言和框架| </font></em><em><font>JavaScript</font></em><font>并指定Flow可执行文件的路径。</font><font>在此</font></font><a href="https://blog.jetbrains.com/webstorm/2016/11/using-flow-in-webstorm/" rel="nofollow" data-token="6b3fa3702f7798d85947733f66c0b696"><font><font>博客文章中</font></font></a><font><font>了解有关使用Flow的更多</font><a href="https://blog.jetbrains.com/webstorm/2016/11/using-flow-in-webstorm/" rel="nofollow" data-token="6b3fa3702f7798d85947733f66c0b696"><font>信息</font></a><font>。</font></font></p>
</p></div>
</p></div>
<link href="https://csdnimg.cn/release/phoenix/mdeditor/markdown_views-e9f16cbbc2.css" rel="stylesheet">
</div>
]]></content:encoded>
										</item>
		<item>
		<title>Deeplink:web唤醒app</title>
		<link>https://uzzz.org/article/1705.html</link>
				<pubDate>Fri, 10 Mar 2017 07:40:31 +0000</pubDate>
		<dc:creator><![CDATA[fandyvon]]></dc:creator>
				<category><![CDATA[App]]></category>
		<category><![CDATA[前端]]></category>
		<category><![CDATA[开发]]></category>

		<guid isPermaLink="false">http://wp.uzzz.org/article/1705.html</guid>
				<description><![CDATA[在Android平台URI主要分五个部分：scheme, authority, path, queryParameter, queryString。其中authority又分为host和port。格式如下：(url的所有字母命名只能为小写) scheme://host:port/path?qureyParameter=queryString 例如：mysch]]></description>
								<content:encoded><![CDATA[<div id="article_content" class="article_content clearfix">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-3019150162.css">
<div id="content_views" class="markdown_views prism-atom-one-dark">
  <!-- flowchart 箭头图标 勿删 --><br />
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
   <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
  </svg> </p>
<p>在Android平台URI主要分五个部分：scheme, authority, path, queryParameter, queryString。其中authority又分为host和port。格式如下：(url的所有字母命名只能为小写) <br /> scheme://host:port/path?qureyParameter=queryString <br /> 例如：myscheme://www.febmaple.com:80/mypath?key=mykey</p>
<p>在Android的Manifest配置文件中，在要启动的activity下配置项中有配置。 <br /> 其中包含内容有:</p>
<pre class="prettyprint"><code class=" hljs xml"><span class="hljs-tag">&lt;<span class="hljs-title">data</span> <span class="hljs-attribute">android:host</span>=<span class="hljs-value">""</span> <span class="hljs-attribute">android:mimeType</span>=<span class="hljs-value">""</span> <span class="hljs-attribute">android:path</span>=<span class="hljs-value">""</span> <span class="hljs-attribute">android:pathPattern</span>=<span class="hljs-value">""</span> <span class="hljs-attribute">android:pathPrefix</span>=<span class="hljs-value">""</span> <span class="hljs-attribute">android:port</span>=<span class="hljs-value">""</span> <span class="hljs-attribute">android:scheme</span>=<span class="hljs-value">""</span> <span class="hljs-attribute">android:ssp</span>=<span class="hljs-value">""</span> <span class="hljs-attribute">android:sspPattern</span>=<span class="hljs-value">""</span> <span class="hljs-attribute">android:sspPrefix</span>=<span class="hljs-value">""</span>/&gt;</span></code></pre>
<p>1、web端html里写入 <br /> <code>&lt;a href="myscheme://www.febmaple.com:80/mypath?key=mykey"&gt;Click&lt;/a&gt;</code> <br /> 2、android端在menifest的响应activity的intentfilter下配置,一般只需配置scheme和host即可。 <br /> 3、这样手机系统自带浏览器碰到不能处理的scheme之后会发送intent给能处理的应用，因为我们的app可以处理该scheme，所以我的app得到启动。（ps：如果用webview加载html，webview碰到处理不了的scheme并不会发送intent找app处理，而系统自带浏览器是可以的，当然我们的需求就是用系统自带浏览器触发）。</p>
<p><strong><em>Show u my code:</em></strong></p>
<p><strong><em>一、跳到app首页：新建一个app工程用webview加载所写的html，用以触发目标app。（实际需求是直接在系统浏览器里触发目标app）</em></strong> <br /> 1、建立html放到工程的main/assets目录下</p>
<pre class="prettyprint"><code class=" hljs xml"><span class="hljs-doctype">&lt;!DOCTYPE html&gt;</span>  
<span class="hljs-tag">&lt;<span class="hljs-title">html</span>&gt;</span>  
<span class="hljs-tag">&lt;<span class="hljs-title">body</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">h1</span>&gt;</span>Test Scheme<span class="hljs-tag">&lt;/<span class="hljs-title">h1</span>&gt;</span>
<span class="hljs-comment">&lt;!--手动点击跳转--&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">a</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"myscheme://www.febmaple.com:80/mypath?key=mykey"</span>&gt;</span>Click<span class="hljs-tag">&lt;/<span class="hljs-title">a</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">body</span>&gt;</span>  
<span class="hljs-tag">&lt;/<span class="hljs-title">html</span>&gt;</span></code></pre>
<p>2、webview加载本地html内容来触发目标app</p>
<pre class="prettyprint"><code class=" hljs avrasm"> wvUrl<span class="hljs-preprocessor">.loadUrl</span>(<span class="hljs-string">"file:///android_asset/test.html"</span>)<span class="hljs-comment">;</span></code></pre>
<p>3、在app manifeset的**欢迎**activity添加intent-filter配置data标签.</p>
<pre class="prettyprint"><code class=" hljs xml"> <span class="hljs-tag">&lt;<span class="hljs-title">activity </span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">".ui.launching.DemoLaunchingActivity"</span> <span class="hljs-attribute">android:screenOrientation</span>=<span class="hljs-value">"portrait"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">intent-filter</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">action</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.intent.action.MAIN"</span>/&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">category</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.intent.category.LAUNCHER"</span>/&gt;</span>
   <span class="hljs-tag">&lt;/<span class="hljs-title">intent-filter</span>&gt;</span>
   <span class="hljs-comment">&lt;!--网页跳转intentfilter--&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">intent-filter</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">action</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.intent.action.VIEW"</span>/&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">category</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.intent.category.DEFAULT"</span>/&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">category</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.intent.category.BROWSABLE"</span>/&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">data</span> <span class="hljs-attribute">android:scheme</span>=<span class="hljs-value">"myscheme"</span>/&gt;</span>
   <span class="hljs-tag">&lt;/<span class="hljs-title">intent-filter</span>&gt;</span>
   <span class="hljs-tag">&lt;/<span class="hljs-title">activity</span>&gt;</span></code></pre>
<p>4、在配置好的Activity里即可获取外部跳转的参数信息。</p>
<pre class="prettyprint"><code class=" hljs avrasm">   @Override
   protected void onCreate(Bundle savedInstanceState) {
        super<span class="hljs-preprocessor">.onCreate</span>(savedInstanceState)<span class="hljs-comment">; this.setContentView(R.layout.activity_main_launching);</span>
    //接收网页的跳转
      Intent intent = getIntent()<span class="hljs-comment">;</span>
    //Log<span class="hljs-preprocessor">.e</span>(<span class="hljs-string">"febmaple"</span>, <span class="hljs-string">"scheme:"</span> +intent<span class="hljs-preprocessor">.getScheme</span>())<span class="hljs-comment">;</span>
      if (intent != null) {
       Uri uri = intent<span class="hljs-preprocessor">.getData</span>()<span class="hljs-comment">;//获取web端传入的data数据</span>
         if (uri != null) {
      Log<span class="hljs-preprocessor">.e</span>(<span class="hljs-string">"febmaple"</span>, <span class="hljs-string">"scheme: "</span> + uri<span class="hljs-preprocessor">.getScheme</span>())<span class="hljs-comment">;</span>
      Log<span class="hljs-preprocessor">.e</span>(<span class="hljs-string">"febmaple"</span>, <span class="hljs-string">"host: "</span> + uri<span class="hljs-preprocessor">.getHost</span>())<span class="hljs-comment">;</span>
      Log<span class="hljs-preprocessor">.e</span>(<span class="hljs-string">"febmaple"</span>, <span class="hljs-string">"port: "</span> + uri<span class="hljs-preprocessor">.getPort</span>())<span class="hljs-comment">;</span>
      Log<span class="hljs-preprocessor">.e</span>(<span class="hljs-string">"febmaple"</span>, <span class="hljs-string">"path: "</span> + uri<span class="hljs-preprocessor">.getPath</span>())<span class="hljs-comment">;</span>
   //Log<span class="hljs-preprocessor">.e</span>(<span class="hljs-string">"febmaple"</span>, <span class="hljs-string">"queryString: "</span>+uri<span class="hljs-preprocessor">.getQuery</span>())<span class="hljs-comment">;</span>
      Log<span class="hljs-preprocessor">.e</span>(<span class="hljs-string">"febmaple"</span>, <span class="hljs-string">"queryParameter: "</span> +           uri<span class="hljs-preprocessor">.getQueryParameter</span>(<span class="hljs-string">"key"</span>))<span class="hljs-comment">;</span>
            }
        }
    }</code></pre>
<p><strong><em>二、如果要跳特定界面：</em></strong> <br /> 先根据scheme跳到欢迎界面或者主界面，然后再根据queryparameter的参数来确定跳到哪，这样避免了对每个activity都要设置intentfilter的data标签。（如果非要给多个页面配intentfilter，那直接用path作为页面区分的标志就好了）</p>
<p>下面是在欢迎界面获取到web端数据后再跳到特定activity的code： <br /> 1、在html中把queryparameter设为要跳的activity的名字</p>
<pre class="prettyprint"><code class=" hljs xml"><span class="hljs-tag">&lt;<span class="hljs-title">a</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"myscheme://www.febmaple.com:80/mypath?key=com.xxxxx.app.ui.setting.DemoActivity"</span>&gt;</span>Click<span class="hljs-tag">&lt;/<span class="hljs-title">a</span>&gt;</span></code></pre>
<p>2、在欢迎页activity里启动目标activity。</p>
<pre class="prettyprint"><code class=" hljs java">   <span class="hljs-annotation">@Override</span>
   <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onCreate</span>(Bundle savedInstanceState) {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState);          <span class="hljs-keyword">this</span>.setContentView(R.layout.activity_main_launching);
      <span class="hljs-comment">//接收网页的跳转</span>
      Intent intent = getIntent();
      <span class="hljs-keyword">if</span> (intent != <span class="hljs-keyword">null</span>) {
       Uri uri = intent.getData();<span class="hljs-comment">//获取web端传入的data数据</span>
         <span class="hljs-keyword">if</span> (uri != <span class="hljs-keyword">null</span>) {
  aimActivityName = uri.getQueryParameter(<span class="hljs-string">"key"</span>);
  Intent intent1 = <span class="hljs-keyword">new</span> Intent();
  intent1.setClassName(<span class="hljs-string">"com.xxxx.app"</span>, aimActivityName);
  startActivity(intent1);      
            }
        }
    }</code></pre>
<h1 id="终极实现方案">终极实现方案</h1>
<h2 id="写一个scheme路由activity用来统一管理h5对native-app的跳转">写一个scheme路由activity用来统一管理h5对native app的跳转</h2>
<pre class="prettyprint"><code class=" hljs java"><span class="hljs-javadoc">/** * 统一管理h5跳转native * 作者： FebMaple on 23/6/2017. * 邮箱： febmaple219@gmail.com * 版权： FebMaple * ==================================================== */</span>

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SchemeFilterActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AppCompatActivity</span> {</span>
    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onCreate</span>(Bundle savedInstanceState) {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState);
        <span class="hljs-comment">//接受网页的跳转</span>
        Intent intent = getIntent();
        <span class="hljs-keyword">if</span> (intent != <span class="hljs-keyword">null</span>) {
            Uri uri = intent.getData();<span class="hljs-comment">//获取web端传入的data数据</span>
            <span class="hljs-keyword">if</span> (uri != <span class="hljs-keyword">null</span>) {
                String path = uri.getPath();
                <span class="hljs-keyword">if</span> (path == <span class="hljs-keyword">null</span>) <span class="hljs-keyword">return</span>;
                <span class="hljs-keyword">switch</span> (path) {
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"/page1"</span>:
                        todo:页面跳转
                        finish();
                        <span class="hljs-keyword">break</span>;
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"page2"</span>:<span class="hljs-comment">//帖子详情页</span>
                        todo:页面跳转
                        finish();
                        <span class="hljs-keyword">break</span>;
                    <span class="hljs-keyword">default</span>:
                        <span class="hljs-comment">//nothing to do</span>
                        <span class="hljs-keyword">break</span>;
                }


            }
        }
    }
}</code></pre>
<p>把路由activity设为不可见</p>
<pre class="prettyprint"><code class=" hljs xml"><span class="hljs-tag">&lt;<span class="hljs-title">activity </span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">".ui.web.SchemeFilterActivity"</span> <span class="hljs-attribute">android:launchMode</span>=<span class="hljs-value">"singleInstance"</span> <span class="hljs-attribute">android:screenOrientation</span>=<span class="hljs-value">"portrait"</span> <span class="hljs-attribute">android:theme</span>=<span class="hljs-value">"@android:style/Theme.NoDisplay"</span>&gt;</span>
            <span class="hljs-comment">&lt;!--网页跳转intentfilter,path用于确定web跳哪个页面--&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">intent-filter</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">action</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.intent.action.VIEW"</span> /&gt;</span>

                <span class="hljs-tag">&lt;<span class="hljs-title">category</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.intent.category.DEFAULT"</span> /&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">category</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.intent.category.BROWSABLE"</span> /&gt;</span>

                <span class="hljs-tag">&lt;<span class="hljs-title">data </span> <span class="hljs-attribute">android:host</span>=<span class="hljs-value">"www.febmaple.com"</span> <span class="hljs-attribute">android:scheme</span>=<span class="hljs-value">"myscheme"</span> /&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">intent-filter</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">activity</span>&gt;</span></code></pre>
<h3 id="注意事项由于微信对私有协议scheme的屏蔽导致微信分享的链接在微信的webview里是无法直接跳转native-app的所以我们采用通过先跳转浏览器中转的方式来实现">注意事项，由于微信对私有协议scheme的屏蔽，导致微信分享的链接在微信的webview里是无法直接跳转native app的，所以我们采用通过先跳转浏览器中转的方式来实现。</h3>
<p>ps：自动跳转的html：</p>
<pre class="prettyprint"><code class=" hljs xml"><span class="hljs-doctype">&lt;!DOCTYPE html&gt;</span>  
<span class="hljs-tag">&lt;<span class="hljs-title">html</span>&gt;</span>  
<span class="hljs-tag">&lt;<span class="hljs-title">body</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">h1</span>&gt;</span>Test Scheme<span class="hljs-tag">&lt;/<span class="hljs-title">h1</span>&gt;</span> 
<span class="hljs-comment">&lt;!--自动加载隐藏页面跳转--&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">iframe</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"myscheme://www.febmaple.com:80/mypath?key=mykey"</span> <span class="hljs-attribute">style</span>=<span class="hljs-value">"display:none"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">iframe</span>&gt;</span>
<span class="hljs-comment">&lt;!--手动点击跳转--&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">a</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"myscheme://www.febmaple.com:80/mypath?key=mykey"</span>&gt;</span>Click<span class="hljs-tag">&lt;/<span class="hljs-title">a</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">body</span>&gt;</span>  
<span class="hljs-tag">&lt;/<span class="hljs-title">html</span>&gt;</span></code></pre>
</p></div>
<link href="https://csdnimg.cn/release/phoenix/mdeditor/markdown_views-e9f16cbbc2.css" rel="stylesheet">
</div>
]]></content:encoded>
										</item>
	</channel>
</rss>
