<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>GIS &#8211; 有组织在!</title>
	<atom:link href="https://uzzz.org/category/gis/feed" rel="self" type="application/rss+xml" />
	<link>https://uzzz.org/</link>
	<description></description>
	<lastBuildDate>Mon, 08 Oct 2018 08:53:48 +0000</lastBuildDate>
	<language>zh-CN</language>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	<generator>https://wordpress.org/?v=5.2.4</generator>

<image>
	<url>https://uzzz.org/wp-content/uploads/2019/10/cropped-icon-32x32.png</url>
	<title>GIS &#8211; 有组织在!</title>
	<link>https://uzzz.org/</link>
	<width>32</width>
	<height>32</height>
</image> 
	<item>
		<title>使用ArcGIS由DEM创建明暗等高线</title>
		<link>https://uzzz.org/article/979.html</link>
				<pubDate>Mon, 08 Oct 2018 08:53:48 +0000</pubDate>
		<dc:creator><![CDATA[fandyvon]]></dc:creator>
				<category><![CDATA[GIS]]></category>

		<guid isPermaLink="false">http://wp.uzzz.org/article/979.html</guid>
				<description><![CDATA[1895年，波乌林（J.&#160;Pauling）提出明暗等高线法，又称波乌林法。明暗等高线在等高线中加入光照因素，使等高线具有较强的立体感，得到了较广泛的使用。普通等高线立体感不强、不便于初学者使用，地貌晕渲法难以定量表示地形起伏程度，明暗等高线法较好的弥补了以上的不足。 ArcGIS实现由DEM创建明暗等高线 实现思路： 由DEM生成等值线（等高线） ]]></description>
								<content:encoded><![CDATA[<div id="article_content" class="article_content clearfix">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-3019150162.css">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-3019150162.css">
<div class="htmledit_views" id="content_views">
<p>1895年，波乌林（J.&nbsp;Pauling）提出明暗等高线法，又称波乌林法。明暗等高线在等高线中加入光照因素，使等高线具有较强的立体感，得到了较广泛的使用。普通等高线立体感不强、不便于初学者使用，地貌晕渲法难以定量表示地形起伏程度，明暗等高线法较好的弥补了以上的不足。</p>
<p>ArcGIS实现由DEM创建明暗等高线</p>
<p>实现思路：</p>
<ul>
<li>由DEM生成等值线（等高线）</li>
<li>等值线转为栅格要素（栅格才可以直接参与运算）</li>
<li>栅格等值线重分类为一类，值为1</li>
<li>由DEM生成坡向（各个方向以角度表示）</li>
<li>使用栅格计算器将坡向与等高线相乘（带有坡向信息的等高线）</li>
<li>重分类，按照坡向为两大类：0，1</li>
</ul>
<p>具体步骤：</p>
<p><strong>生成等值线</strong></p>
<p>在ArcToolBox中，点击 3D Analyst工具 | 栅格表面 | 等值线</p>
<p>在打开的窗口中，输入DEM数据和适当的等高距</p>
<p><img alt="" class="has" src="https://uzshare.com/_p?https://img-blog.csdn.net/20181008162849671?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1NjYXBlRA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70"></p>
<p><strong>等值线转栅格</strong></p>
<p>在ArcToolBox中，点击 转换工具 | 转为栅格 | 要素转栅格</p>
<p>选择等值线数据，字段随便填，输出像元大小要适当，在尽量大的前提下（快），令每条等高线清晰表示。</p>
<p><img alt="" class="has" src="https://uzshare.com/_p?https://img-blog.csdn.net/20181008163744766?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1NjYXBlRA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70"></p>
<p><strong>栅格等高线重分类</strong></p>
<p>在ArcToolBox中，点击 Spatial Analyst | 重分类 | 重分类</p>
<p>选择栅格等值线，将其分为一类，值为1</p>
<p><img alt="" class="has" src="https://uzshare.com/_p?https://img-blog.csdn.net/20181008163812959?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1NjYXBlRA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70"></p>
<p><strong>由DEM生成坡向</strong></p>
<p>在ArcToolBox中，点击 Spatial Analyst | 表面分析 | 坡向</p>
<p><img alt="" class="has" src="https://uzshare.com/_p?https://img-blog.csdn.net/20181008164025751?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1NjYXBlRA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70"></p>
<p><strong>将栅格等高线乘以坡向</strong></p>
<p>在ArcToolBox中，点击 Spatial Analyst | 地图代数 | 栅格计算器</p>
<p>输入表达式&nbsp;&#8220;Aspect_eleva1&#8221; * &#8220;Reclass_Feat1&#8221; （示例，以实物为准）</p>
<p><img alt="" class="has" src="https://uzshare.com/_p?https://img-blog.csdn.net/2018100816440592?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1NjYXBlRA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70"></p>
<p><strong>重分类上一结果（带有方向的等高线栅格）</strong></p>
<p>0-90，表示正北到正东，将其设置为0</p>
<p>90-270，东-南-西，将其设为1</p>
<p>270-360，西-北，将其设置为0</p>
<p><strong>设置图层颜色</strong></p>
<p>将上一结果中0值设置为黑，1设置为白</p>
<p><strong>设置背景</strong></p>
<p>将DEM数据重分类为1类，将其设置为灰色，作为底图</p>
<p><img alt="" class="has" src="https://uzshare.com/_p?https://img-blog.csdn.net/20181008165326583?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1NjYXBlRA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70"></p>
</p></div>
</div>
]]></content:encoded>
										</item>
		<item>
		<title>BaiduMap SDK-多个个性化地图切换Demo</title>
		<link>https://uzzz.org/article/1426.html</link>
				<pubDate>Thu, 19 Jul 2018 15:36:40 +0000</pubDate>
		<dc:creator><![CDATA[fandyvon]]></dc:creator>
				<category><![CDATA[GIS]]></category>
		<category><![CDATA[BaiduMap]]></category>
		<category><![CDATA[百度地图]]></category>

		<guid isPermaLink="false">http://wp.uzzz.org/article/1426.html</guid>
				<description><![CDATA[目录 1. assets中添加多个json文件 1.1 json文件项目结构 1.2 陆地(custom_config_land.json) 1.3水系(custom_config_water.json) 1.4 绿地(custom_config_green.json) 1.5 行政边界(custom_config_district.json) 1.6 旅游]]></description>
								<content:encoded><![CDATA[<div id="article_content" class="article_content clearfix">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-3019150162.css">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-3019150162.css">
<div class="htmledit_views" id="content_views">
<p id="main-toc"><strong>目录</strong></p>
<p id="1.%20assets%E4%B8%AD%E6%B7%BB%E5%8A%A0%E5%A4%9A%E4%B8%AAjson%E6%96%87%E4%BB%B6-toc" style="margin-left:0px;"><a href="#1.%20assets%E4%B8%AD%E6%B7%BB%E5%8A%A0%E5%A4%9A%E4%B8%AAjson%E6%96%87%E4%BB%B6" rel="nofollow" data-token="4cc567416003cce97b81a1d00122c30f">1. assets中添加多个json文件</a></p>
<p id="1.1%20json%E6%96%87%E4%BB%B6%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84-toc" style="margin-left:40px;"><a href="#1.1%20json%E6%96%87%E4%BB%B6%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84" rel="nofollow" data-token="d60d631fe7bb301d854f91e5bf5b0f47">1.1 json文件项目结构</a></p>
<p id="1.2%20%E9%99%86%E5%9C%B0(custom_config_land.json)-toc" style="margin-left:40px;"><a href="#1.2%20%E9%99%86%E5%9C%B0(custom_config_land.json)" rel="nofollow" data-token="9554e9c40fa888e8c2f8ee45d5a10435">1.2 陆地(custom_config_land.json)</a></p>
<p id="1.3%E6%B0%B4%E7%B3%BB(custom_config_water.json)-toc" style="margin-left:40px;"><a href="#1.3%E6%B0%B4%E7%B3%BB(custom_config_water.json)" rel="nofollow" data-token="9b47be210d66b5ddeb028e7f585a16e7">1.3水系(custom_config_water.json)</a></p>
<p id="1.4%20%E7%BB%BF%E5%9C%B0(custom_config_green.json)-toc" style="margin-left:40px;"><a href="#1.4%20%E7%BB%BF%E5%9C%B0(custom_config_green.json)" rel="nofollow" data-token="5afc76251847b68d6f2c685ab048d275">1.4 绿地(custom_config_green.json)</a></p>
<p id="1.5%20%E8%A1%8C%E6%94%BF%E8%BE%B9%E7%95%8C(custom_config_district.json)-toc" style="margin-left:40px;"><a href="#1.5%20%E8%A1%8C%E6%94%BF%E8%BE%B9%E7%95%8C(custom_config_district.json)" rel="nofollow" data-token="4d07de98615ddd3b58816a9f4edd7ed2">1.5 行政边界(custom_config_district.json)</a></p>
<p id="1.6%20%E6%97%85%E6%B8%B8%E6%99%AF%E5%8C%BA(custom_config_scenic.json)-toc" style="margin-left:40px;"><a href="#1.6%20%E6%97%85%E6%B8%B8%E6%99%AF%E5%8C%BA(custom_config_scenic.json)" rel="nofollow" data-token="32b8e8b26b6e6882a6c675d62dff912b">1.6 旅游景区(custom_config_scenic.json)</a></p>
<p id="1.7%C2%A0%E6%9C%BA%E5%9C%BA(custom_config_airport.json)-toc" style="margin-left:40px;"><a href="#1.7%C2%A0%E6%9C%BA%E5%9C%BA(custom_config_airport.json)" rel="nofollow" data-token="c9972627d7e697b8d7d44f6a765b9e06">1.7&nbsp;机场(custom_config_airport.json)</a></p>
<p id="2%20%E4%BB%A3%E7%A0%81%E7%BC%96%E5%86%99-toc" style="margin-left:0px;"><a href="#2%20%E4%BB%A3%E7%A0%81%E7%BC%96%E5%86%99" rel="nofollow" data-token="1a28f835d15317d39e29623dfa8ee2ac">2 代码编写</a></p>
<p id="2.1%20xm%E4%BB%A3%E7%A0%81-toc" style="margin-left:40px;"><a href="#2.1%20xm%E4%BB%A3%E7%A0%81" rel="nofollow" data-token="d8b1dd542281684486b07eea4ef3cfe3">2.1 xm代码</a></p>
<p id="2.2%20Activity%E4%BB%A3%E7%A0%81-toc" style="margin-left:40px;"><a href="#2.2%20Activity%E4%BB%A3%E7%A0%81" rel="nofollow" data-token="54b2386bb87a122fede5f56b2a551434">2.2 Activity代码</a></p>
<p id="2.2.1%20%E5%88%9D%E5%A7%8B%E5%8C%96%E6%89%80%E6%9C%89view-toc" style="margin-left:80px;"><a href="#2.2.1%20%E5%88%9D%E5%A7%8B%E5%8C%96%E6%89%80%E6%9C%89view" rel="nofollow" data-token="eb69f833a8df8a5fd08b2477a0128de0">2.2.1 初始化所有view</a></p>
<p id="2.2.2%20%E5%88%9D%E5%A7%8B%E5%8C%96%E6%95%B0%E6%8D%AE%E5%92%8C%E4%BA%8B%E4%BB%B6-toc" style="margin-left:80px;"><a href="#2.2.2%20%E5%88%9D%E5%A7%8B%E5%8C%96%E6%95%B0%E6%8D%AE%E5%92%8C%E4%BA%8B%E4%BB%B6" rel="nofollow" data-token="4cef8da71c73e3368ee24ce4eeb4b9b6">2.2.2 初始化数据和事件</a></p>
<p id="2.2.3%20%E4%B8%AA%E6%80%A7%E5%8C%96%E5%88%87%E6%8D%A2%E4%BA%8B%E4%BB%B6-toc" style="margin-left:80px;"><a href="#2.2.3%20%E4%B8%AA%E6%80%A7%E5%8C%96%E5%88%87%E6%8D%A2%E4%BA%8B%E4%BB%B6" rel="nofollow" data-token="af172b5cabc60fce18532a1046ad5aaa">2.2.3 个性化切换事件</a></p>
<p id="2.2.4%20%E5%88%B7%E6%96%B0%E5%9C%B0%E5%9B%BE(%E8%AE%BE%E7%BD%AE%E4%B8%AA%E6%80%A7%E5%8C%96%E5%9C%B0%E5%9B%BE)-toc" style="margin-left:80px;"><a href="#2.2.4%20%E5%88%B7%E6%96%B0%E5%9C%B0%E5%9B%BE(%E8%AE%BE%E7%BD%AE%E4%B8%AA%E6%80%A7%E5%8C%96%E5%9C%B0%E5%9B%BE)" rel="nofollow" data-token="d24a61b38c40df39848a1001730fa52a">2.2.4 刷新地图(设置个性化地图)</a></p>
<p id="2.2.5%20%E5%8A%A0%E8%BD%BDassets%E4%B8%AD%E7%9A%84json-toc" style="margin-left:80px;"><a href="#2.2.5%20%E5%8A%A0%E8%BD%BDassets%E4%B8%AD%E7%9A%84json" rel="nofollow" data-token="08f3e09fd1ac8f25c7e0c37707ee5175">2.2.5 加载assets中的json</a></p>
<p id="2.2.6%20onDestroy()%E9%94%80%E6%AF%81%E5%9C%B0%E5%9B%BE%E7%BB%84%E4%BB%B6%E5%92%8C%E5%9C%B0%E5%9B%BE-toc" style="margin-left:80px;"><a href="#2.2.6%20onDestroy()%E9%94%80%E6%AF%81%E5%9C%B0%E5%9B%BE%E7%BB%84%E4%BB%B6%E5%92%8C%E5%9C%B0%E5%9B%BE" rel="nofollow" data-token="ebb15ae302e13572c129023303d3fb73">2.2.6 onDestroy()销毁地图组件和地图</a></p>
<hr id="hr-toc">
<h1 id="1.%20assets%E4%B8%AD%E6%B7%BB%E5%8A%A0%E5%A4%9A%E4%B8%AAjson%E6%96%87%E4%BB%B6">1. assets中添加多个json文件</h1>
<h2 id="1.1%20json%E6%96%87%E4%BB%B6%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84">1.1 json文件项目结构</h2>
<p><img alt="" class="has" src="https://uzshare.com/_p?https://img-blog.csdn.net/20180719232135481?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L25pdWJhMTIzNDU2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70"></p>
<h2 id="1.2%20%E9%99%86%E5%9C%B0(custom_config_land.json)">1.2 陆地(custom_config_land.json)</h2>
<pre class="has">
<code class="hljs">[
  {
    "featureType": "land",
    "elementType": "geometry",
    "stylers": {
      "color": "#800000ff",
      "level": "12"
    }
  },
  {
    "featureType": "land",
    "elementType": "geometry",
    "stylers": {
      "color": "#800080ff"
    }
  }
]</code></pre>
<h2 id="1.3%E6%B0%B4%E7%B3%BB(custom_config_water.json)">1.3水系(custom_config_water.json)</h2>
<pre class="has">
<code class="hljs">[
  {
    "featureType": "water",
    "elementType": "geometry",
    "stylers": {
      "color": "#4169E1ff"
    }
  }
]</code></pre>
<h2 id="1.4%20%E7%BB%BF%E5%9C%B0(custom_config_green.json)">1.4 绿地(custom_config_green.json)</h2>
<pre class="has">
<code class="hljs">[
  {
    "featureType": "green",
    "elementType": "geometry",
    "stylers": {
      "color": "#008000ff"
    }
  }
]</code></pre>
<h2 id="1.5%20%E8%A1%8C%E6%94%BF%E8%BE%B9%E7%95%8C(custom_config_district.json)">1.5 行政边界(custom_config_district.json)</h2>
<pre class="has">
<code class="hljs">[
  {
    "featureType": "districtlabel",
    "elementType": "labels.text.stroke",
    "stylers": {
      "color": "#13171dff"
    }
  },
  {
    "featureType": "districtlabel",
    "elementType": "labels.text.fill",
    "stylers": {
      "color": "#4e5961ff"
    }
  }
]</code></pre>
<h2 id="1.6%20%E6%97%85%E6%B8%B8%E6%99%AF%E5%8C%BA(custom_config_scenic.json)">1.6 旅游景区(custom_config_scenic.json)</h2>
<pre class="has">
<code class="hljs">[
  {
    "featureType": "scenicspotslabel",
    "elementType": "all",
    "stylers": {
      "color": "#800000ff"
    }
  },
  {
    "featureType": "scenicspots",
    "elementType": "all",
    "stylers": {
      "color": "#800000ff"
    }
  }
]</code></pre>
<h2 id="1.7%C2%A0%E6%9C%BA%E5%9C%BA(custom_config_airport.json)">1.7&nbsp;机场(custom_config_airport.json)</h2>
<pre class="has">
<code class="hljs">[
  {
    "featureType": "airportlabel",
    "elementType": "all",
    "stylers": {
      "color": "#800000ff"
    }
  },
  {
    "featureType": "airportlabel",
    "elementType": "geometry.fill",
    "stylers": {
      "color": "#800000ff"
    }
  },
  {
    "featureType": "airportlabel",
    "elementType": "labels.text.fill",
    "stylers": {
      "color": "#800000ff"
    }
  }
]</code></pre>
<h1 id="2%20%E4%BB%A3%E7%A0%81%E7%BC%96%E5%86%99">2 代码编写</h1>
<h2 id="2.1%20xm%E4%BB%A3%E7%A0%81">2.1 xm代码</h2>
<pre class="has">
<code class="hljs">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:id="@+id/rl_parent"&gt;
 &lt;LinearLayout android:id="@+id/ll_mapView"
     android:layout_width="match_parent"
     android:layout_height="match_parent"&gt;

 &lt;/LinearLayout&gt;
    &lt;!--&lt;com.baidu.mapapi.map.MapView--&gt;
        &lt;!--android:id="@+id/bmapView"--&gt;
        &lt;!--android:layout_width="fill_parent"--&gt;
        &lt;!--android:layout_height="fill_parent"--&gt;
        &lt;!--android:clickable="true" /&gt;--&gt;

    &lt;LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:background="@android:color/darker_gray"&gt;

        &lt;RadioGroup
            android:id="@+id/rb_custom"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="vertical"&gt;

            &lt;RadioButton
                android:id="@+id/rb_open_custom"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/str_open_mapcustom" /&gt;

            &lt;RadioButton
                android:id="@+id/rb_close_custom"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/str_close_mapcustom" /&gt;
        &lt;/RadioGroup&gt;

        &lt;Spinner android:id="@+id/spinner"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
         android:visibility="gone" &gt;&lt;/Spinner&gt;
    &lt;/LinearLayout&gt;

    &lt;TextView
        android:id="@+id/txt_coding"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:background="@android:color/darker_gray"
        android:padding="5dp"
        android:textColor="@android:color/black"
        android:textSize="16dp" /&gt;

&lt;/RelativeLayout&gt;</code></pre>
<h2 id="2.2%20Activity%E4%BB%A3%E7%A0%81">2.2 Activity代码</h2>
<h3 id="2.2.1%20%E5%88%9D%E5%A7%8B%E5%8C%96%E6%89%80%E6%9C%89view">2.2.1 初始化所有view</h3>
<pre class="has">
<code class="hljs">    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_mapcustom);
        context = this;
        //初始化View
        initView();
        //初始化数据和事件
        initData();

    }
   //初始化View
    private void initView() {
        rb_custom = (RadioGroup) findViewById(R.id.rb_custom);
        txt_coding = (TextView) findViewById(R.id.txt_coding);
        rb_open_custom = (RadioButton) findViewById(R.id.rb_open_custom);
        rb_close_custom = (RadioButton) findViewById(R.id.rb_close_custom);
        spinner = (Spinner) findViewById(R.id.spinner);
        ll_mapView = (LinearLayout) findViewById(R.id.ll_mapView);
        mMapView = new MapView(context, new BaiduMapOptions());
        ll_mapView.addView(mMapView);
    }</code></pre>
<h3 id="2.2.2%20%E5%88%9D%E5%A7%8B%E5%8C%96%E6%95%B0%E6%8D%AE%E5%92%8C%E4%BA%8B%E4%BB%B6">2.2.2 初始化数据和事件</h3>
<pre class="has">
<code class="hljs"> private void initData() {
        List&lt;String&gt; spinnerList = new ArrayList&lt;String&gt;();
        spinnerList.add("个性化");
        spinnerList.add("陆地");
        spinnerList.add("水系");
        spinnerList.add("绿地");
        spinnerList.add("行政区边界");
        spinnerList.add("景区");
        spinnerList.add("机场");
        spinnerList.add("地铁");
        spinnerList.add("教育和医疗");
        ArrayAdapter adapter = new ArrayAdapter(this, android.R.layout.simple_spinner_dropdown_item, spinnerList);
        spinner.setAdapter(adapter);
        spinner.setOnItemSelectedListener(new SpinnerOnSelect());
        rb_custom.setOnCheckedChangeListener(new RadioGroup.OnCheckedChangeListener() {
            @Override
            public void onCheckedChanged(RadioGroup radioGroup, int i) {
                switch (i) {
                    case R.id.rb_open_custom://显示个性地图
                        MapView.setMapCustomEnable(true);
                        spinner.setVisibility(View.VISIBLE);
                        break;
                    case R.id.rb_close_custom://关闭个性地图
                        MapView.setMapCustomEnable(false);
                        spinner.setVisibility(View.INVISIBLE);
                        break;
                }
            }
        });
    }
</code></pre>
<h3 id="2.2.3%20%E4%B8%AA%E6%80%A7%E5%8C%96%E5%88%87%E6%8D%A2%E4%BA%8B%E4%BB%B6">2.2.3 个性化切换事件</h3>
<pre class="has">
<code class="hljs"> private class SpinnerOnSelect implements AdapterView.OnItemSelectedListener {

        @Override
        public void onItemSelected(AdapterView&lt;?&gt; adapterView, View view, int i, long l) {

            switch (i) {
                case 0://全部
                    refreshMap("custom_config_dark.json");
                    break;
                case 1://陆地
                    refreshMap("custom_config_land.json");
                    break;
                case 2://水系
                    refreshMap("custom_config_water.json");
                    break;
                case 3://绿地
                    refreshMap("custom_config_green.json");
                    break;
                case 4://行政区边界
                    refreshMap("custom_config_district.json");
                    break;
                case 5://景点
                    refreshMap("custom_config_scenic.json");
                    break;
                case 6://机场
                    refreshMap("custom_config_airport.json");
                    break;
               
            }
        }

        @Override
        public void onNothingSelected(AdapterView&lt;?&gt; adapterView) {

        }
    }</code></pre>
<h3 id="2.2.4%20%E5%88%B7%E6%96%B0%E5%9C%B0%E5%9B%BE(%E8%AE%BE%E7%BD%AE%E4%B8%AA%E6%80%A7%E5%8C%96%E5%9C%B0%E5%9B%BE)">2.2.4 刷新地图(设置个性化地图)</h3>
<pre class="has">
<code class="hljs">  /**
     * 设置个性化地图
     */

    private void refreshMap(String path) {
        MapView.setMapCustomEnable(false);
        ll_mapView.removeView(mMapView);
        mMapView.onDestroy();

        setMapCustomFile(context, path);
        mMapView = new MapView(context, new BaiduMapOptions());
        ll_mapView.addView(mMapView);
        MapView.setMapCustomEnable(true);
    }</code></pre>
<h3 id="2.2.5%20%E5%8A%A0%E8%BD%BDassets%E4%B8%AD%E7%9A%84json">2.2.5 加载assets中的json</h3>
<pre class="has">
<code class="hljs">// 设置个性化地图config文件路径
    private void setMapCustomFile(Context context, String PATH) {
        FileOutputStream out = null;
        InputStream inputStream = null;
        String moduleName = null;
        try {
            inputStream = context.getAssets()
                    .open("customConfigdir/" + PATH);
            byte[] b = new byte[inputStream.available()];
            inputStream.read(b);

            moduleName = context.getFilesDir().getAbsolutePath();
            File f = new File(moduleName + "/" + PATH);
            if (f.exists()) {
                f.delete();
            }
            f.createNewFile();
            out = new FileOutputStream(f);
            out.write(b);
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            try {
                if (inputStream != null) {
                    inputStream.close();
                }
                if (out != null) {
                    out.close();
                }
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
        MapView.setCustomMapStylePath(moduleName + "/" + PATH);
    }</code></pre>
<h3 id="2.2.6%20onDestroy()%E9%94%80%E6%AF%81%E5%9C%B0%E5%9B%BE%E7%BB%84%E4%BB%B6%E5%92%8C%E5%9C%B0%E5%9B%BE">2.2.6 onDestroy()销毁地图组件和地图</h3>
<p>onDestory()如果直销毁MapView，不销毁地图组件或造成崩溃；</p>
<pre class="has">
<code class="hljs"> @Override
    protected void onDestroy() {
        super.onDestroy();
        //在activity执行onDestroy时执行mMapView.onDestroy()，实现地图生命周期管理
        MapView.setMapCustomEnable(false);
        mMapView.onDestroy();
    }

    @Override
    protected void onResume() {
        super.onResume();
        //在activity执行onResume时执行mMapView. onResume ()，实现地图生命周期管理
        mMapView.onResume();
    }

    @Override
    protected void onPause() {
        super.onPause();
        //在activity执行onPause时执行mMapView. onPause ()，实现地图生命周期管理
        mMapView.onPause();
    }</code></pre>
<p>&nbsp;</p>
</p></div>
</div>
]]></content:encoded>
										</item>
		<item>
		<title>ArcGIS Runtime 添加谷歌地图、OpenStreetMap作为底图</title>
		<link>https://uzzz.org/article/1370.html</link>
				<pubDate>Thu, 05 Jul 2018 14:13:04 +0000</pubDate>
		<dc:creator><![CDATA[fandyvon]]></dc:creator>
				<category><![CDATA[GIS]]></category>

		<guid isPermaLink="false">http://wp.uzzz.org/article/1370.html</guid>
				<description><![CDATA[ArcGIS 自从发布Runtime以来一直以Web+C/S的模式，慢慢挑战着AE/AO的江湖地位。其可以添加Web底图的方法更是其杀手锏。 现在就分享ArcGIS Runtime中添加Google底图的方法。 开门见山，直接写出其最关键的类，自定义的一个类GoogleTileLayer public class GoogleTileLayer : Serv]]></description>
								<content:encoded><![CDATA[<div id="article_content" class="article_content clearfix">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-3019150162.css">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-3019150162.css">
<div class="htmledit_views" id="content_views">
<p>ArcGIS 自从发布Runtime以来一直以Web+C/S的模式，慢慢挑战着AE/AO的江湖地位。其可以添加Web底图的方法更是其杀手锏。</p>
<p>现在就分享ArcGIS Runtime中添加Google底图的方法。</p>
<p>开门见山，直接写出其最关键的类，自定义的一个类GoogleTileLayer</p>
<pre><code class="language-csharp">public class GoogleTileLayer : ServiceImageTiledLayer
    {
        private string LayerType = "s";//图层类型

        public GoogleTileLayer(TileInfo tileInfo, Envelope fullExtent, String inputLayerType)
            : base(tileInfo, fullExtent)
        {
            LayerType = inputLayerType;
        }

        //重写Uri函数
        protected override Task&lt;Uri&gt; GetTileUriAsync(int level, int row, int column, CancellationToken cancellationToken)
        {
            //Console.WriteLine(level.ToString() + "," + row.ToString() + "," + column.ToString());//打印输出
            Task&lt;Uri&gt; myTask = new Task&lt;Uri&gt;(() =&gt; GetTileUri(level, row, column, cancellationToken));
            myTask.Start();
            return myTask;
        }

        private Uri GetTileUri(int level, int row, int column, CancellationToken cancellationToken)
        {
           MapViewControl.VisableInt = level;
            string baseUrlString = "http://mt0.google.cn/vt/lyrs=" + LayerType;
            string urlString = baseUrlString + "&amp;x=" + column.ToString() + "&amp;y=" + row.ToString() + "&amp;z=" + level.ToString() + "&amp;s=";
            Uri myUri = new Uri(urlString);
            return myUri;
        }
    }</code></pre>
<p>该类中的最核心函数为</p>
<pre><code class="language-csharp">GetTileUri</code></pre>
<p>这个函数重写了获取谷歌瓦片地图的服务器地址，不仅仅是mt0服务器mt1-4服务器也是可以访问的。</p>
<p>（注意：不同服务器的地图更新程度可能不一样，就比如正射影像，半年的更新频率，在不同服务器中具体情况不同。）</p>
<p>接下来就是实例化这个函数的时候的这个构造函数了</p>
<pre><code class="language-csharp"> public GoogleTileLayer(TileInfo tileInfo, Envelope fullExtent, String inputLayerType): base(tileInfo, fullExtent)</code></pre>
<p>其中Tileinfo的细节如下</p>
<pre><code class="language-csharp">public TileInfo(int dpi, TileImageFormat format, IEnumerable&lt;LevelOfDetail&gt; levelsOfDetail, MapPoint origin, SpatialReference spatialReference, int tileHeight, int tileWidth);</code></pre>
<p>查找对应的参数以后做出以下对应的定义：</p>
<pre><code class="language-csharp">private SpatialReference referenceDefault = new SpatialReference(3875);//定义墨卡托投影
MapPoint mapPointDefault = new MapPoint(-20037508.342787, 20037508.342787, referenceDefault);//默认初始点
</code></pre>
<pre><code class="language-csharp">int GoogleMapTileHeight = 256;//每块切片的高度和宽度
int GoogleMapTileWidth = 256;
int dpiDefault = 96;//谷歌地图DPI
TileImageFormat tileImageFormat = TileImageFormat.Png;//瓦片地图类型</code></pre>
<pre><code class="language-csharp">其中比较关键的LevelOfDetail如下</code></pre>
<pre><code class="language-csharp"> List&lt;LevelOfDetail&gt; lodDefault = new List&lt;LevelOfDetail&gt;()//LevelOfDetailList
            {
                new LevelOfDetail (0,156543.033928023,591657527.591555),
                new LevelOfDetail (1,78271.5169640117,295828763.795778),
                new LevelOfDetail (2,39135.7584820059,147914381.897889),
                new LevelOfDetail (3,19567.8792410029,73957190.9489444),
                new LevelOfDetail (4,9783.93962050147,36978595.4744722),
                new LevelOfDetail (5,4891.96981025073,18489297.7372361),
                new LevelOfDetail (6,2445.98490512537,9244648.86861805),
                new LevelOfDetail (7,1222.99245256268,4622324.43430902),
                new LevelOfDetail (8,611.496226281342,2311162.21715451),
                new LevelOfDetail (9,305.748113140671,1155581.10857726),
                new LevelOfDetail (10,152.874056570335,577790.554288628),
                new LevelOfDetail (11,76.4370282851677,288895.277144314),
                new LevelOfDetail (12,38.2185141425838,144447.638572157),
                new LevelOfDetail (13,19.1092570712919,72223.8192860785),
                new LevelOfDetail (14,9.55462853564596,36111.9096430392),
                new LevelOfDetail (15,4.77731426782298,18055.9548215196),
                new LevelOfDetail (16,2.38865713391149,9027.97741075981),
                new LevelOfDetail (17,1.19432856695575,4513.98870537991),
                new LevelOfDetail (18,0.597164283477873,2256.99435268995),
                new LevelOfDetail (19,0.298582141738936,1128.49717634498),
                new LevelOfDetail(20,0.1492910708694683,564.24858817249),
                new LevelOfDetail(21,0.07464553543473415,282.124294086245),
                new LevelOfDetail(22,0.037322767717367075,141.0621470431225),
            };</code></pre>
<p>然后将实例化以后的GoogleTileLayer 传给MapView作为其Map.BaseMap然后即可显示底图。<br />
  </p>
<p><img src="https://uzshare.com/_p?https://img-blog.csdn.net/20180705221204811?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RhcmtleWVycw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""></p>
<p></p>
</p></div>
</div>
]]></content:encoded>
										</item>
	</channel>
</rss>
